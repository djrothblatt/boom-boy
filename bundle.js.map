{"version":3,"sources":["webpack:///webpack/bootstrap 9551e618e129f782b074","webpack:///external \"createjs\"","webpack:///./lib/player/movable.js","webpack:///./lib/player/ai_player.js","webpack:///./lib/player/player.js","webpack:///./lib/constants.js","webpack:///./lib/board.js","webpack:///./lib/bomb.js","webpack:///./lib/boom_boy.js"],"names":["Movable","x","y","color","stage","boxLength","boxHeight","sprite","Bitmap","addChild","removeChild","direction","randomInt","max","Math","floor","random","AIPlayer","resetMove","resetBomb","ticksToMove","ticksToBomb","validMoves","length","Player","moveKeys","key","NUM_ROWS","NUM_COLS","BOX_X","BOX_Y","NUM_DESTRUCTIBLES","Board","humanPlayers","aiPlayers","numRows","numCols","grid","i","innerArray","j","push","undefined","placeObstacles","inBounds","bind","placeExplosion","xPos","yPos","floorTile","tileType","tile","players","concat","forEach","player","draw","includes","hasObstacle","numRandomObstacles","isOccupied","bomb","window","setTimeout","positionsInBounds","explosionPath","map","line","filter","unobstructedPositions","removeObstructedPositions","flattened","reduce","list","val","lifetime","targetArray","targetIndex","indexOf","splice","remove","out","n","pos","clearDestructibles","newX","newY","move","isValidMove","placeBomb","Bomb","range","oneUpto","dx","dy","left","right","up","down","acc","MOVE_KEYS_P1","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","MOVE_KEYS_P2","a","w","d","s","init","Stage","player1","player2","player3","player4","board","document","onkeydown","handleKeyDown","e","Ticker","addEventListener","tick","preventDefault","movePlayers","removeAllChildren","moveAI","update"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9551e618e129f782b074","module.exports = createjs;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"createjs\"\n// module id = 0\n// module chunks = 0","/* Abstract class */\nimport { BOX_X, BOX_Y } from '../constants';\nimport createjs from 'createjs';\n\nexport default class Movable {\n    constructor({x, y, color, stage}) {\n\tthis.x = x;\n\tthis.y = y;\n\tthis.color = color;\n\tthis.stage = stage;\n    }\n\n    draw(boxLength, boxHeight) {\n\tlet sprite = new createjs.Bitmap(`assets/${this.color}-standing-player.png`);\n\tsprite.x = this.x * boxLength;\n\tsprite.y = this.y * boxHeight;\n\tthis.stage.addChild(sprite);\n    }\n\n    remove() {\n\tthis.stage.removeChild(this);\n    }\n\n    direction() {\n\t// instantiated by child classes\n    }\n\n    move(direction) {\n\tswitch (direction) {\n\tcase 'left':\n\t    this.x--;\n\t    return;\n\tcase 'right':\n\t    this.x++;\n\t    return;\n\tcase 'up':\n\t    this.y--;\n\t    return;\n\tcase 'down':\n\t    this.y++;\n\t    return;\n\tdefault:\n\t    return;\n\t}\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/player/movable.js","import Movable from './movable';\n\nfunction randomInt(max) { // in { 0, 1 ..., max-1 }\n    return Math.floor(Math.random() * max);\n}\n\nexport default class AIPlayer extends Movable {\n    constructor({x, y, color, stage}) {\n\tsuper({x, y, color, stage});\n\tthis.resetMove();\n\tthis.resetBomb();\n    }\n\n    resetMove() {\n\tthis.ticksToMove = randomInt(10) + 1;\n    }\n\n    resetBomb() {\n\tthis.ticksToBomb = randomInt(55) + 1;\n    }\n    \n    direction({validMoves}) {\n\tif (this.ticksToMove-- === 0) {\n\t    this.resetMove();\n\t    return validMoves[randomInt(validMoves.length)];\n\t} else if (this.ticksToBomb-- === 0) {\n\t    this.resetBomb();\n\t    return \"bomb\";\t    \n\t} else {\n\t    return null;\n\t}\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/player/ai_player.js","import Movable from './movable';\n\nexport default class Player extends Movable {\n    constructor({x, y, color, stage, moveKeys}) {\n\tsuper({x, y, color, stage});\n\tthis.moveKeys = moveKeys;\n    }\n\n    direction({key}) {\n\treturn this.moveKeys[key];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/player/player.js","export const NUM_ROWS = 13; // number of boxes on x-axis\nexport const NUM_COLS = 11;\nexport const BOX_X = 25; // size of box on x-axis\nexport const BOX_Y = 44;\nexport const NUM_DESTRUCTIBLES = 25;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/constants.js","import { NUM_ROWS, NUM_COLS, BOX_X, BOX_Y, NUM_DESTRUCTIBLES } from './constants';\n\nimport createjs from 'createjs';\nimport Bomb from './bomb';\nimport Movable from './player/movable';\nimport AIPlayer from './player/ai_player';\nimport Player from './player/player';\n\nclass Board {\n    constructor(stage, humanPlayers, aiPlayers) {\n\tthis.numRows = NUM_ROWS;\n\tthis.numCols = NUM_COLS;\n\tthis.boxLength = BOX_X;\n\tthis.boxHeight = BOX_Y;\n\n\tthis.grid = [];\n\n\tfor (let i = 0; i < NUM_COLS; i++) {\n\t    let innerArray = [];\n\t    for (let j = 0; j < NUM_ROWS; j++) {\n\t\tinnerArray.push(undefined);\n\t    }\n\t    this.grid.push(innerArray);\n\t}\n\n\tthis.placeObstacles();\n\tthis.stage = stage;\n\tthis.humanPlayers = humanPlayers;\n\tthis.aiPlayers = aiPlayers;\n\n\tthis.inBounds = this.inBounds.bind(this);\n\tthis.placeExplosion = this.placeExplosion.bind(this);\n    }\n\n    draw() {\n\tfor (let i = 0; i < this.numCols; i++) {\n\t    for (let j = 0; j < this.numRows; j++) {\n\t\tconst xPos = i * this.boxLength;\n\t\tconst yPos = j * this.boxHeight;\n\n\t\tconst floorTile = new createjs.Bitmap('assets/floor.png');\n\t\tfloorTile.x = xPos;\n\t\tfloorTile.y = yPos;\n\t\tthis.stage.addChild(floorTile);\n\n\t\tlet tileType = this.grid[i][j] || \"floor\";\n\t\tif (tileType instanceof Movable) { tileType = \"floor\"; }\n\n\t\tconst tile = new createjs.Bitmap(`assets/${tileType}.png`);\n\t\ttile.x = xPos;\n\t\ttile.y = yPos;\n\t\tthis.stage.addChild(tile);\n\t    }\n\t}\n\tconst players = this.humanPlayers.concat(this.aiPlayers);\n\tplayers.forEach(player => player.draw(this.boxLength, this.boxHeight));\n    }\n\n    hasObstacle({x, y}) {\n\treturn ([\"brick\", \"destructibleBrick\", \"bomb\"].includes(this.grid[x][y]));\n    }\n\n    isOccupied({x, y}) {\n\treturn this.hasObstacle({x, y}) || this.grid[x][y] instanceof Movable;\n    }\n\n    placeObstacles() {\n\tfor (let i = 1; i < this.numCols; i += 2) {\n\t    for (let j = 1; j < this.numRows; j += 2) {\n\t\tthis.grid[i][j] = \"brick\";\n\t    }\n\t}\n\n\tlet numRandomObstacles = NUM_DESTRUCTIBLES;\n\twhile (numRandomObstacles > 0) {\n\t    let x = Math.floor(Math.random() * this.numCols);\n\t    let y = Math.floor(Math.random() * this.numRows);\n\t    if (!this.isOccupied({x, y})) {\n\t\tthis.grid[x][y] = \"destructibleBrick\";\n\t\tnumRandomObstacles--;\n\t    }\n\t}\n    }\n\n    placeBomb(player) {\n\tconst x = player.x;\n\tconst y = player.y;\n\tconst bomb =  new Bomb({x, y});\n\tthis.grid[x][y] = \"bomb\";\n\twindow.setTimeout(() => {\n\t    this.grid[x][y] = undefined;\n\t    const positionsInBounds = bomb.explosionPath().map(line => line.filter(this.inBounds));\n\t    const unobstructedPositions = positionsInBounds.map(line => this.removeObstructedPositions(line));\n\t    const flattened = unobstructedPositions.reduce((list, val) => list.concat(val), []);\n\t    flattened.forEach(this.placeExplosion);\n\t}, bomb.lifetime);\n    }\n\n    placeExplosion({x, y}) {\n\tthis.grid[x][y] = \"explosion\";\n\twindow.setTimeout(() => {\n\t    this.grid[x][y] = undefined;\n\t}, 750);\n    }\n\n    clearDestructibles({x, y}) {\n\tif (this.grid[x][y] === \"destructibleBrick\") {\n\t    this.grid[x][y] = undefined;\n\t} else if (this.grid[x][y] instanceof Movable) {\n\t    let targetArray;\n\t    if (this.grid[x][y] instanceof Player) {\n\t\ttargetArray = this.humanPlayers;\n\t    } else {\n\t\ttargetArray = this.aiPlayers;\n\t    }\n\t    const targetIndex = targetArray.indexOf(this.grid[x][y]);\n\t    targetArray.splice(targetIndex, 1);\n\n\t    this.grid[x][y].remove();\n\t    this.grid[x][y] = undefined;\n\t}\n    }\n\n    removeObstructedPositions(line) {\n\tlet out = [];\n\tfor (let i = 0, n = line.length; i < n; i++) {\n\t    const pos = line[i];\n\t    if (this.isOccupied(pos)) {\n\t\tthis.clearDestructibles(pos);\n\t\treturn out;\n\t    } else {\n\t\tout.push(pos);\n\t    }\n\t};\n\treturn out;\n    }\n\n    inBounds({x, y}) {\n\treturn (x >= 0) && (y >= 0) && (x < NUM_COLS) && (y < NUM_ROWS);\n    }\n\n    isValidMove(player, direction) {\n\tconst pos = {x: player.x, y: player.y};\n\n\tlet newX = player.x;\n\tlet newY = player.y;\n\tswitch (direction) {\n\tcase \"left\":\n\t    newX--;\n\t    break;\n\tcase \"right\":\n\t    newX++;\n\t    break;\n\tcase \"up\":\n\t    newY--;\n\t    break;\n\tcase \"down\":\n\t    newY++;\n\t    break;\n\t}\n\n\treturn this.inBounds({x: newX, y: newY}) && !this.isOccupied({x: newX, y: newY});\n    }\n\n    movePlayers(key) {\n\tthis.humanPlayers.forEach(player => this.move(player, key));\n    }\n\n    moveAI() {\n\tthis.aiPlayers.forEach(player => this.move(player, null));\n    }\n\n    move(player, key) {\n\tconst validMoves = [\"left\", \"right\", \"up\", \"down\"].filter(this.isValidMove.bind(this, player));\n\tconst direction = player.direction({key, validMoves});\n\tlet x = player.x;\n\tlet y = player.y;\n\tif (direction === 'bomb' && this.grid[x][y] !== 'bomb') {\n\t    this.placeBomb(player);\n\t} else if (this.isValidMove(player, direction)) {\n\t    if (this.grid[x][y] !== \"bomb\") {\n\t\tthis.grid[x][y] = undefined;\n\t    }\n\n\t    player.move(direction);\n\t    x = player.x;\n\t    y = player.y;\n\t    this.grid[x][y] = player;\n\t}\n    }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/board.js","export default class Bomb {\n    constructor({x, y}) {\n\tthis.x = x;\n\tthis.y = y;\n\tthis.range = 3;\n\tthis.lifetime = 3000;\n    }\n\n    explosionPath() {\n\tfunction oneUpto(n) {\n\t    if (n <= 1) return [1];\n\t    return oneUpto(n - 1).concat([n]);\n\t}\n\tfunction line({dx, dy}) {\n\t    return oneUpto(this.range).reduce((list, i) => list.concat({\n\t\tx: this.x + (dx * i),\n\t\ty: this.y + (dy * i)\n\t    }), []);\n\t}\n\tline = line.bind(this);\n\n\tconst left = {dx: -1, dy: 0};\n\tconst right = {dx: 1, dy: 0};\n\tconst up = {dx: 0, dy: -1};\n\tconst down = {dx: 0, dy: 1};\n\t\n\treturn [left, right, up, down].reduce((acc, direction) => acc.concat([line(direction)]), [[{x: this.x, y: this.y}]]);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/bomb.js","import createjs from 'createjs';\nimport Board from './board';\nimport Player from './player/player';\nimport AIPlayer from './player/ai_player';\n\nconst MOVE_KEYS_P1 = {\n    ArrowLeft: 'left',\n    ArrowUp: 'up',\n    ArrowRight: 'right',\n    ArrowDown: 'down',\n    '/': 'bomb'\n};\n\nconst MOVE_KEYS_P2 = {\n    a: 'left',\n    w: 'up',\n    d: 'right',\n    s: 'down',\n    ' ': 'bomb'\n};\n\nfunction init() {\n    const stage = new createjs.Stage('gameEasel');\n    const player1 = new Player({\n\tx: 0,\n\ty: 0,\n\tcolor: 'white',\n\tmoveKeys: MOVE_KEYS_P1,\n\tstage\n    });\n\n    const player2 = new Player({\n\tx: 10,\n\ty: 12,\n\tcolor: 'black',\n\tmoveKeys: MOVE_KEYS_P2,\n\tstage\n    });\n\n    const player3 = new AIPlayer({\n\tx: 10,\n\ty: 0,\n\tcolor: 'red',\n\tstage\n    });\n\n    const player4 = new AIPlayer({\n\tx: 0,\n\ty: 12,\n\tcolor: 'blue',\n\tstage\n    });\n\n    const board = new Board(stage, [player1, player2], [player3, player4]);\n\n    document.onkeydown = e => handleKeyDown(e, board);\n    createjs.Ticker.addEventListener('tick', () => tick(board, stage));\n}\n\nfunction handleKeyDown(e, board) {\n    const key = e.key;\n\n    if (MOVE_KEYS_P1[key] || MOVE_KEYS_P2[key]) {\n\te.preventDefault();\n\tboard.movePlayers(key);\n    }\n}\n\nfunction tick(board, stage) {\n    stage.removeAllChildren();\n    board.moveAI();\n    board.draw();\n    stage.update();\n}\n\ndocument.addEventListener('DOMContentLoaded', init);\n\n\n\n// WEBPACK FOOTER //\n// ./lib/boom_boy.js"],"sourceRoot":""}